<div *ngIf="product" class="container product-details-container">
  <div class="row g-4">
    <!-- Product Image -->
    <div class="col-md-5 text-center">
      <div class="product-image-wrapper">
        <img [src]="product.image_url || 'https://via.placeholder.com/500'" class="product-image" alt="{{product.name}}">
      </div>
    </div>
    
    <!-- Product Information -->
    <div class="col-md-7">
      <div class="product-info">
        <h1 class="product-title">{{product.name}}</h1>
        <div class="price-section">
          <span class="price">{{product.price}} EGP</span>
        </div>
        
        <!-- Unified Product Information Table -->
        <div class="product-table-container">
          <table class="product-table">
            <tbody>
              <tr *ngIf="product.categories?.name">
                <td class="table-label">Category:</td>
                <td class="table-value">{{product.categories.name}}</td>
              </tr>
              
              <tr *ngIf="product.color">
                <td class="table-label">Color:</td>
                <td class="table-value">{{product.color}}</td>
              </tr>
              
              <tr *ngIf="product.sizes && product.sizes.length">
                <td class="table-label">Available Sizes:</td>
                <td class="table-value">
                  <div class="sizes-container">
                    <span *ngFor="let size of product.sizes" class="size-badge">{{size}}</span>
                  </div>
                </td>
              </tr>
              
              <tr *ngIf="product.quantity">
                <td class="table-label">Stock:</td>
                <td class="table-value">
                  <span [class.low-stock]="product.quantity <= 5">{{product.quantity}} pieces</span>
                </td>
              </tr>
              
              <tr *ngIf="product.details">
                <td class="table-label">Product Details:</td>
                <td class="table-value details-text">{{product.details}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- WhatsApp Order Button -->
        <div class="order-section">
          <button class="whatsapp-btn" (click)="openWhatsApp()">
            <i class="fab fa-whatsapp"></i>
            <span>اطلب الآن عبر واتساب</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div *ngIf="loading" class="container text-center py-5">
  <div class="spinner-border" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3">Loading product details...</p>
</div>

<!-- No Product Found -->
<div *ngIf="!loading && !product" class="container text-center py-5">
  <div class="alert alert-warning">
    <h4>Product Not Found</h4>
    <p>The product you're looking for doesn't exist or has been removed.</p>
    <a routerLink="/" class="btn btn-primary">Go Back Home</a>
  </div>
</div>
